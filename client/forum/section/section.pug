- self.add_raw_data('settings',     self.settings)
- self.add_raw_data('section',      self.section)
- self.add_raw_data('subscription', self.subscription)
- self.add_raw_data('pagination',   self.pagination)

article#content.forum-section-root(
  data-keymap= {
    'home': 'forum.section:nav_to_start',
    'end':  'forum.section:nav_to_end'
  }
  class=(self.pagination.chunk_offset > 0 ? '' : 'forum-section-root__m-first-page')
  data-last-topic-hid= self.last_topic_hid
  data-top-marker=     self.topics && self.topics.length > 0 ? self.topics[0].cache.last_post : null
  data-bottom-marker=  self.topics && self.topics.length > 0 ? self.topics[self.topics.length - 1].cache.last_post : null
)

  -
    var navbar_args = {
      title:    self.section.title,
      level_up: self.parent_hid && self.section_level >= 2 ?
                self.link_to('forum.section', { section_hid: self.parent_hid }) + '#cat' + self.section.hid :
                self.link_to('forum.index') + '#cat' + self.section.hid,
      toolbar:  'forum.section.blocks.toolbar_controls',
      progress: {
        link_top:    self.link_to('forum.section', { section_hid: self.section.hid }),
        link_bottom: self.link_to('forum.section', { section_hid: self.section.hid, topic_hid: self.last_topic_hid }),
        current:     self.pagination.chunk_offset,
        total:       self.pagination.total
      }
    };

  != self.partial('@common.blocks.navbar.levelup_progress_apps', navbar_args)
  != self.partial('@common.blocks.navbar.alt_levelup_progress_title_toolbar', navbar_args)

  nav.breadcrumbs-container
    .layout__container.container-fluid
      != self.partial('@common.blocks.breadcrumbs')

  .layout__container.container-fluid
    != self.partial('@users.blocks.announces')

    header.page-head
      .float-xs-right
        != self.partial('@forum.section.blocks.toolbar_controls')
      h1.page-head__title(itemprop='name')= self.section.title
      p.page-head__descr.hidden-xs-down(itemprop='description')
        | #{self.section.description}

    //- Subsections, if exist
    if (self.subsections || []).length
      != self.partial('@forum.blocks.sections_list')

    if self.section.is_category === false || (self.topics && self.topics.length)
      if self.topics && self.topics.length
        .forum-section__loading-prev(
          class=(self.pagination.chunk_offset === 0 ? 'hidden-xs-up' : '')
        )
          span.icon.icon-loading-placeholder

        .forum-topiclist._affix(
          data-affix-top={
            offset:     500,
            wire_above: 'forum.section:load_prev',
            throttle:   100
          }
          data-affix-bottom={
            offset:     500,
            wire_below: 'forum.section:load_next',
            throttle:   100
          }
        )!= self.partial('@forum.blocks.topics_list')

        .forum-section__loading-next(
          class=(self.topics && self.topics.length > 0 && self.topics[self.topics.length - 1].hid === self.last_topic_hid ? 'hidden-xs-up' : '')
        )
          span.icon.icon-loading-placeholder

        nav.pager
          - var link = self.link_to(self.apiPath, { section_hid: self.section.hid, topic_hid: self.prev_topic_hid });
          a.btn.btn-secondary(href=link)= self.t('prev_page')

          - var link = self.link_to(self.apiPath, { section_hid: self.section.hid, topic_hid: self.next_topic_hid });
          a.btn.btn-secondary(href=link)= self.t('next_page')
      else
        p.forum-section__notopics
          != self.t('no_topics')
