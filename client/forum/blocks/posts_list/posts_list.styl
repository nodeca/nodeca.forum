// Forum posts list. Used in forum `topic` page
//

@import "nodeca.core/client/common/_variables"


.forum-postlist__paginator
  text-align center

.forum-postlist__datediff
  margin-bottom 10px
  height 34px
  line-height 34px
  color gray
  background-color lighten(grayLightest, 70%)
  border 1px solid grayLightest
  border-radius 2px
  box-shadow 0 0 2px #f8f8f8
  padding-left 15px

// hide top paginator when javascript is disabled
.no-js .forum-postlist__paginator
  display none

// Post styles

.forum-post
  margin-bottom baseLineHeight

.forum-post__m-deleted
  background grayLightest

.forum-post__m-hb
  background grayLightest

.forum-post__m-deleted-hard
  background grayLightest

//
// header
//

.forum-post__meta
  display table
  table-layout fixed
  width 100%
  margin-bottom 10px
  height 34px
  line-height 34px
  color gray
  background-color lighten(grayLightest, 70%)
  border 1px solid grayLightest
  border-radius 2px
  box-shadow 0 0 2px #f8f8f8
.forum-post__meta-flex
  display table-cell
  vertical-align middle
  font-size 12px
  padding-left 15px
  &:last-child
    padding-right 15px
.forum-post__meta-avatar
  display none
  width 48px
.forum-post__meta-content
  display flex
  table-layout fixed
  width 100%

.forum-post__meta-author
  width 100%
  font-size 16px
  shortable()

.forum-post__meta-info
  white-space nowrap
  margin-left 15px

.forum-post__author
  color inherit

.forum-post__reply-to-link
  color inherit
  margin-right 1em

.forum-post__reply-to-avatar
  width 16px
  height 16px
  margin 0px 3px
  border-radius 2px

.forum-post__link
  color inherit
  //margin-right 15px

.forum-post__select
  display table-cell
  vertical-align middle
  width 30px
  text-align center
.forum-post__select-cb
  position relative
  top 3px

//
// left / right columns
//

asideSize = '$$ N.config.users.avatars.resize.md.height $$'px

.forum-post__aside
  float left
  margin-top 2px
  .av-l
    width asideSize
    height asideSize

.forum-post__content
  font-family sansWideFontFamily
  margin-right 0px
  margin-left asideSize + 20px

@media (max-width: screenXs - 1)
  .forum-post__aside
    display none
  .forum-post__meta-avatar
    display table-cell
  .forum-post__meta-flex
    padding-left 0
  .forum-post__content
    margin 0
  .forum-post__meta-content
    flex-direction column
  .forum-post__meta-author
    font-size 14px
    height 24px
    line-height 26px
  .forum-post__meta-info
    margin-left 0
    font-size 10px
    height 16px
    line-height 14px
  .forum-post__reply-to-avatar
    width 12px
    height 12px
  .av-l
    width 40px
    height 40px
    border-radius 2px

//
// content column
//

.forum-post__message
  min-height 60px

.forum-post__controls
  margin-top 10px

.forum-post__controls-blk
  margin 0
  padding 0
  list-style none

.forum-post__control-item
  display inline-block
  margin-right: 0px
  &:last-child
    margin-right: 0

.forum-post__infraction .icon
  color red
.forum-post__infraction-m-warning .icon
  color yellow

.forum-post__action
  background-color transparent
  color gray

  &:hover
  &:focus
  &:active
    background-color grayLightest

  .icon:before
    font-size 120%
    top 1px

.forum-post__reply
  .forum-post__action
    color #428bca

  .short
    display none

@media (max-width: screenSm - 1)
  .forum-post__reply
    .full
      display none
    .short
      display inline-block

//
// Hovering magick
//

.forum-post
  .forum-post__action
    transition opacity .3s ease
    opacity .2
  &:hover
    .forum-post__action
      opacity 1

.forum-post__votes
.forum-post__infraction
  .forum-post__action
    opacity 1

//
// Actions states
//
.forum-post__bookmark-remove
  display none

.forum-post__m-selected
  background-color #ffd
  .forum-post__meta
    background-color #f8f8f0

.forum-post__m-bookmarked
  .forum-post__bookmark-remove
    display inline-block
    opacity 1
    .icon
      color red
  .forum-post__bookmark-add
    display none

.forum-post__undelete
  display none

.forum-post__m-deleted
.forum-post__m-deleted-hard

  .forum-post__undelete
    display block

  .forum-post__votes
  .forum-post__vote-up
  .forum-post__vote-down
  .forum-post__bookmark
  .forum-post__edit
  .forum-post__delete
  .forum-post__reply
    display none

.forum-post__m-voted-up
  .forum-post__vote-up
    .forum-post__action
      opacity 1
    .icon
      color green

.forum-post__m-voted-down
  .forum-post__vote-down
    .forum-post__action
      opacity 1
    .icon
      color red

.forum-post__bookmarks-count:after
  content attr(data-bm-count)
  margin-left .2em

.forum-post__bookmarks-count[data-bm-count="0"]:after
  display none

.forum-post__votes
  .forum-post__action:after
    content attr(data-votes-count)
  .forum-post__action[data-votes-count="0"]
    display none


@keyframes forum-post-flash-animation {
  from  { background: #bbeeff;  }
  to    { background: none; }
}

.forum-post__m-flash .forum-post__content
  animation forum-post-flash-animation 3s
