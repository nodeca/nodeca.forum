
//- create dropdown menu
mixin _page_progress_dropdown_menu()
  form.dropdown-menu.page-progress__menu(
    data-on-submit='forum.topic:nav_to_post'
  )
    - var pgmpid = 'pgmid' + ~~(Math.random()*100000000);

    label.input(for=pgmpid)= self.t('jump_to')

    .input-group
      input.page-progress__jump-input.form-control(
        id=pgmpid
        name='post'
        type='number'
        min='1'
        max=self.max
        value=self.current || 0
        placeholder=self.t('placeholder')
      )
      span.input-group-btn
        button.btn.btn-secondary(type='submit')= self.t('go')


- var current = self.current;
- var total   = self.max;

//- ensure that current is in [1..total] range
- current = Math.max(1, Math.min(current, total));

ul.page-progress(data-current=current, data-total=total, data-section=self.section_hid, data-topic=self.topic_hid)
  li.page-progress__item
    a.page-progress__button-first.icon.icon-to-top(
      href= self.link_to('forum.topic', { section_hid: self.section_hid, topic_hid: self.topic_hid, post_hid: 1 })
    )

  li.page-progress__item.dropdown
    a.page-progress__info.dropdown-toggle(
      href='#'
      data-toggle='dropdown'
    )
      .page-progress__label= self.t('label', { current: current || 0, total: total })
      .page-progress__bar
        .page-progress__bar-fill(style="width: " + (current / total * 100).toFixed(2) + "%")

    +_page_progress_dropdown_menu()

  li.page-progress__item
    a.page-progress__button-last.icon.icon-to-bottom(
      href= self.link_to('forum.topic', { section_hid: self.section_hid, topic_hid: self.topic_hid, post_hid: self.max })
    )
